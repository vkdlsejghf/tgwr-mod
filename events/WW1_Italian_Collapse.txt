add_namespace = garibaldi
#Victor Emmannuel abdicates
country_event = {
	id = garibaldi.1
	title = garibaldi.1.t
	desc = garibaldi.1.d
	fire_only_once = yes
	picture = GFX_report_event_royal_parade
	mean_time_to_happen = {
		days = 14
	}
	trigger = {
		tag = ITA
		has_country_flag = great_war_loser
		OR = {
			has_global_flag = versallies_treaty
			has_global_flag = frankfurt_treaty
		}
		has_country_leader = {
			character = ITA_vittorio_emanuele_iii
			ruling_only = no
		}
		NOT = {
			has_government = communism
		}
	}
	option = {
		name = garibaldi.1.a
		ITA_vittorio_emanuele_iii = {
			remove_country_leader_role = {
				ideology = autocracy
			}
		}
		promote_character = ITA_umberto_ii
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_government = neutrality
					}				
				}
				add_ideas = umberto_ii
			}	
			remove_ideas = victor_emmanuel_ww1
			remove_ideas = victor_emmanuel
			news_event = {
				id = garibaldi.2
				hours = 1
			}
			country_event = {
				id = garibaldi.3
				days = 6
			}
			country_event = {
				id = garibaldi.5
				days = 19
			}
			SRD = {
				SRD_vittorio_emanuele_iii = {
					remove_country_leader_role = {
						ideology = autocracy
					}
				}
				promote_character = SRD_umberto_ii
			}
		}
	}
}

#Victor abdication news event
news_event = {
	id = garibaldi.2
	title = garibaldi.2.t
	desc = garibaldi.2.d
	picture = GFX_news_event_royal_visit
	major = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.2.a
	}
}

#Socialist riots in North Italy
country_event = {
	id = garibaldi.3
	title = garibaldi.3.t
	desc = garibaldi.3.d
	picture = GFX_report_event_generic_riot
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 39
						state = 158
						state = 159
						state = 160
						state = 161
						state = 162
						state = 735
						state = 833
						state = 834
						state = 835
					}
					is_owned_by = ITA
					is_controlled_by = ITA
				}
				set_demilitarized_zone = yes
			}
			add_popularity = {
				ideology = communism
				popularity = 0.2
			}
		}
	}
	option = {
		name = garibaldi.3.a
		add_stability = -0.1
	}
}

#Republican Split
country_event = {
	id = garibaldi.4
	title = garibaldi.4.t
	desc = garibaldi.4.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_spain_civil_war_volunteers_02
	immediate = {
		hidden_effect = {
			create_dynamic_country = {
				original_tag = ITA
				every_state = {
					limit = {
						is_core_of = ROOT
					}
					add_core_of = PREV
				}
				set_capital = { state = 161 }
				set_politics = {
					ruling_party = communism
					elections_allowed = no
				}
				set_popularities = {
					democratic = 17
					neutrality = 0
					fascism = 4
					communism = 79
				}
				set_country_flag = great_war_loser
				set_country_flag = ITA_socialist_italy_flag
				set_cosmetic_tag = SRI
				set_party_name = {
					ideology = democratic
					long_name = ITA_democratic_reformist_party_long
					name = ITA_democratic_reformist_party
				}
				create_corps_commander = {
					name = "Randolfo Pacciardi"
					portrait_path = "gfx/leaders/ITA/ITA_randolfo_pacciardi.png"
					traits = {
						politically_connected
						trickster
						guerilla_fighter
					}
					skill = 3
					attack_skill = 2
					defense_skill = 3
					planning_skill = 2
					logistics_skill = 3
				}
				create_corps_commander = {
					name = "Edmondo Rossoni"
					portrait_path = "gfx/leaders/ITA/ITA_edmondo_rossoni.png"
					traits = {
						career_officer
						organizer
					}
					skill = 2
					attack_skill = 2
					defense_skill = 1
					planning_skill = 1
					logistics_skill = 3
				}
				create_corps_commander = {
					name = "Arnaldo Azzi"
					portrait_path = "gfx/leaders/ITA/ITA_arnaldo_azzi.png"
					traits = {
					}
					skill = 1
					attack_skill = 1
					defense_skill = 1
					planning_skill = 1
					logistics_skill = 1
				}
				load_focus_tree = italian_focus
				load_focus_tree = {
					tree = italian_focus
					keep_completed = yes
				}
				unlock_national_focus = ITA_vittoria_mutilata
				unlock_national_focus = ITA_support_socialist_movenment
				unlock_national_focus = ITA_prepare_for_revolution
				reserve_dynamic_country = yes
				ROOT = {
					ITA_nicola_bombacci = {
						set_nationality = SRI
					}
					ITA_benito_mussolini = {
						set_nationality = SRI
					}
					ITA_anna_kuliscioff = {
						set_nationality = SRI
					}
					ITA_costantino_lazzari = {
						set_nationality = SRI
					}
					ITA_alceste_de_ambris = {
						set_nationality = SRI
					}
				}	
				ITA_anna_kuliscioff = {
					promote_character = yes
				}
				ITA_benito_mussolini = {
					promote_character = yes
				}
				ITA_costantino_lazzari = {
					set_nationality = SRI
				}
				ITA_nicola_bombacci = {
					promote_character = yes
				}	
			}
			every_owned_state = {
				limit = {
					OR = {
						state = 158
						state = 159
						state = 161
						state = 162
						state = 160
						state = 833
						state = 39
						state = 834
						state = 735
					}
					is_controlled_by = ROI
				}
				SRI = {
					transfer_state = PREV
					remove_state_claim = PREV
					add_state_core = PREV
				}
			}
			SRI = {
				leave_faction = yes
				set_rule = {
					can_join_factions = no
				}
				inherit_technology = ROI
				ITA_civil_war_idea_transfer = yes
				add_ideas = ITA_death_before_surrender
				add_ideas = extensive_conscription
				division_template = {
					name = "Guardie Rosse"
					division_names_group = ITA_GAR_01
					template_counter = 69
					regiments = {
						militia = {
							x = 0
							y = 0
						}
						militia = {
							x = 0
							y = 1
						}
						militia = {
							x = 0
							y = 2
						}
						militia = {
							x = 0
							y = 3
						}
					}
				}
			}
			ROI = {
				add_popularity = {
					ideology = communism
					popularity = -0.5
				}
				transfer_units_fraction = {
					target = SRI
					size = 0.6
					stockpile_ratio = 0.7
					army_ratio = 0.74
					navy_ratio = 0.4
					air_ratio = 0.6
					keep_unit_leaders_trigger = {
						always = yes
					}
				}
				declare_war_on = {
					target = SRI
					type = civil_war
				}
				##add_civil_war_target = SRI
				if = {
					limit = {
						SRI = {
							owns_state = 162
						}
					}
					162 = {
						create_unit = {
							division = "name = \"Avanguardie Repubblicane\" division_template = \"Avanguardie Repubblicane\" start_experience_factor = 0.3"
							owner = PREV
							prioritize_location = 6973
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				if = {
					limit = {
						SRI = {
							owns_state = 160
						}
					}
					160 = {
						create_unit = {
							division = "name = \"Avanguardie Repubblicane\" division_template = \"Avanguardie Repubblicane\" start_experience_factor = 0.3"
							owner = PREV
							prioritize_location = 11584
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "name = \"Avanguardie Repubblicane\" division_template = \"Avanguardie Repubblicane\" start_experience_factor = 0.4"
							owner = PREV
							prioritize_location = 3604
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "name = \"Avanguardie Repubblicane\" division_template = \"Avanguardie Repubblicane\" start_experience_factor = 0.25"
							owner = PREV
							prioritize_location = 6656
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				if = {
					limit = {
						SRI = {
							owns_state = 159
						}
					}
					159 = {
						create_unit = {
							division = "name = \"Avanguardie Repubblicane\" division_template = \"Avanguardie Repubblicane\" start_experience_factor = 0.3"
							owner = PREV
							prioritize_location = 11568
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "name = \"Avanguardie Repubblicane\" division_template = \"Avanguardie Repubblicane\" start_experience_factor = 0.3"
							owner = PREV
							prioritize_location = 6661
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				if = {
					limit = {
						SRI = {
							owns_state = 158
						}
					}
					158 = {
						create_unit = {
							division = "name = \"Avanguardie Repubblicane\" division_template = \"Avanguardie Repubblicane\" start_experience_factor = 0.3"
							owner = PREV
							prioritize_location = 9738
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "name = \"Avanguardie Repubblicane\" division_template = \"Avanguardie Repubblicane\" start_experience_factor = 0.3"
							owner = PREV
							prioritize_location = 770
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
			}
			ITS = {
				declare_war_on = {
					target = SRI
					type = civil_war
				}
				##add_civil_war_target = SRI
			}
			EMI = {
				add_state_core = 833
			}	
		}
	}
	option = {
		name = garibaldi.4.a
	}
	option = {
		name = garibaldi.4.b
		ai_chance = {
			factor = 0
		}
		SRI = {
			change_tag_from = ROOT
		}
	}
}

#Republican coup 
country_event = {
	id = garibaldi.5
	title = garibaldi.5.t
	desc = garibaldi.5.d
	picture = GFX_report_event_saf_coup
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			remove_ideas = umberto_ii
			set_politics = {
				ruling_party = democratic
				elections_allowed = yes
			}
			set_country_flag = ITA_republican_italy_flag
			set_cosmetic_tag = ROI
			set_popularities = {
				democratic = 38
				neutrality = 25
				fascism = 9
				communism = 28
			}
			ITA_francesco_saverio_nitti = {
				add_country_leader_role = {
					country_leader={
						ideology=social_liberalism
						traits = {
							financial_expert
						}
					}
				}
				promote_character = social_liberalism
			}
			set_party_name = {
				ideology = neutrality
				long_name = ITA_neutrality_monarchist_party_long
				name = ITA_neutrality_monarchist_party
			}
			country_event = {
				id = garibaldi.6
				days = 17
			}
			clr_country_flag = color_democratic_italy
			every_state = {
				limit = {
					OR = {
						state = 115
						state = 117
						state = 156
						state = 157
					}
					is_owned_by = ITA
					is_controlled_by = ITA
				}
				set_demilitarized_zone = yes
			}
			ITA_emanuele_filiberto = {
				set_character_name = ITA_emanuele_filiberto_i
				promote_leader = yes
				set_nationality = SRD
			}
			ITA_luigi_amedeo = {
				set_nationality = SRD
			}
			SRD = {
				retire_character = SRD_umberto_ii
				create_country_leader = {
					name = "ITA_emanuele_filiberto_i"
					picture = "gfx/leaders/ITA/ITA_Emanuele_Filiberto.png"
					ideology = autocracy
				}
			}	
		}
	}
	option = {
		name = garibaldi.5.a
		retire_character = ITA_umberto_ii
		set_party_name = {
			ideology = democratic
			long_name = ITA_democratic_republican_party_long
			name = ITA_democratic_republican_party
		}
		add_stability = -0.05
		hidden_effect = {
			country_event = {
				id = garibaldi.6
				days = 17
			}
		}
	}
}

#Southern Monarchists declare restoration of the monarchy
country_event = {
	id = garibaldi.6
	title = garibaldi.6.t
	desc = garibaldi.6.d
	picture = GFX_report_event_ger_civil_war
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			delete_unit_template_and_units = {
				division_template = "Ascari"
				disband = no
			}
			delete_unit_template_and_units = {
				division_template = "Ascari Somalo"
				disband = no
			}
			delete_unit_template_and_units = {
				division_template = "Truppe Coloniali della Cirenaica"
				disband = no
			}
			delete_unit_template_and_units = {
				division_template = "Truppe Coloniali della Tripolitania"
			}	
			create_dynamic_country = {
				original_tag = ITA
				every_state = {
					limit = {
						is_core_of = ROOT
					}
					add_core_of = PREV
				}
				set_capital = { state = 117 }
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				}
				set_popularities = {
					democratic = 31
					neutrality = 59
					fascism = 6
					communism = 4
				}
				set_party_name = {
					ideology = democratic
					long_name = ITA_democratic_ldr_party_long
					name = ITA_democratic_ldr_party
				}
				set_country_flag = great_war_loser
				set_country_flag = ITA_monarchist_italy_flag
				set_cosmetic_tag = ITS
				create_country_leader = {
					name = "ITA_provisional_government_of_naples"
					picture = "gfx/leaders/ITA/ITA_Provisional_Government_of_Naples.png"
					ideology = oligarchism
				}
				load_focus_tree = {
					tree = italian_focus
					keep_completed = yes
				}
				reserve_dynamic_country = yes
			}
			every_owned_state = {
				limit = {
					OR = {
						state = 115
						state = 117
						state = 156
						state = 157
					}
					is_controlled_by = ROI
				}
				ITS = {
					transfer_state = PREV
					remove_state_claim = PREV
					add_state_core = PREV
				}
			}
			ITS = {
				inherit_technology = ROI
				ITA_civil_war_idea_transfer = yes
				leave_faction = yes
				set_rule = {
					can_join_factions = no
				}
				set_capital = { state = 117 }
				add_ideas = ITA_death_before_surrender
				add_ideas = ITA_idea_mafia				#The mafia was the strongest in Sicily.
				add_ideas = extensive_conscription
				if = {
					limit = {
						ROI = {
							owns_state = 114
						}
					}
					set_province_controller = 11773
				}
				if = {
					limit = {
						ROI = {
							owns_state = 2
						}
					}
					set_province_controller = 923
					set_province_controller = 11882
				}
				ROOT = {
					every_unit_leader = {
						limit = {
							OR = {
								has_trait = trait_royalist
							    has_trait = trait_royal
								has_trait = old_guard
								has_trait = politically_connected
								has_trait = old_guard_navy
							}
						}
						set_nationality = PREV.PREV
					}
					ITA_ferdinando_iii = {
						set_nationality = ITS
					}
					ITA_gabriele_d_annunzio = {
						set_nationality = ITS
					}
					ITA_antonio_salandra = {
						set_nationality = ITS
					}
					ITA_vittorio_emanuele_orlando = {
						set_nationality = ITS
					}
					ITA_enrico_arlotta = {
						set_nationality = ITS
					}
					ITA_antonino_paterne_castello = {
						set_nationality = ITS
					}
					ITA_umberto_cagni = {
						set_nationality = ITS
					}	
				}
				promote_character = ITA_antonio_salandra
				ITA_vittorio_emanuele_orlando = {
					add_country_leader_role = {
						country_leader={
							ideology=social_liberalism
							traits={ mafioso  }
							
						}
					}
					promote_character = social_liberalism
				}
				ITA_gabriele_d_annunzio = {
					promote_character = yes
					add_corps_commander_role = {
						traits = { trait_reckless substance_abuser media_personality politically_connected inspirational_leader trickster commando }
						skill = 2
						attack_skill = 2
						defense_skill = 1
						planning_skill = 1
						logistics_skill = 2
					}
				}
			}
			ROOT = {
				remove_ideas = idea_army_restrictions
				remove_ideas = idea_armistice
				leave_faction = yes
				set_rule = {
					can_join_factions = no
				}
				clr_country_flag = Scramble_for_Africa
				add_ideas = ITA_death_before_surrender
				remove_ideas = ITA_idea_mafia
				remove_ideas = idea_italy_triple_alliance
				division_template = {
					name = "Avanguardie Repubblicane"
					is_locked = yes
					division_names_group = ITA_INF_01
					override_model = ITA_infantry_entity
					regiments = {
						militia = {
							x = 0
							y = 0
						}
						militia = {
							x = 0
							y = 1
						}
						militia = {
							x = 0
							y = 2
						}
					}
				}
				add_popularity = {
					ideology = neutrality
					popularity = -0.5
				}
				declare_war_on = {
					target = ITS
					type = civil_war
				}
				#this break republican italy on sardinia
				##add_civil_war_target = ITS
				transfer_units_fraction = {
					target = ITS
					size = 0.4
					stockpile_ratio = 0.4
					army_ratio = 0.45
					navy_ratio = 0.5
					air_ratio = 0.35
					keep_unit_leaders_trigger = {
						NOT = {		
						    has_trait = trait_royalist
							has_trait = trait_royal
							has_trait = old_guard
							has_trait = politically_connected
							has_trait = old_guard_navy
						}
					}
				}
	
					
				if = {
					limit = {
						ITS = {
							owns_state = 156
						}
					}
					set_province_controller = 3901
				}
				if = {
					limit = {
						ITS = {
							owns_state = 117
						}
					}
					set_province_controller = 6980
				}
				country_event = {
					id = garibaldi.4
					days = 19
				}
			}
			every_owned_state = {
				limit = {
					OR = {
						state = 2
						state = 115
						state = 117
						state = 156
						state = 157
						state = 158
						state = 159
						state = 160
						state = 161
						state = 162
						state = 735
						state = 833
						state = 834
						state = 835
					}
					is_controlled_by = ROI
				}
				set_demilitarized_zone = no
			}
			news_event = {
				id = garibaldi.7
				hours = 1
			}
			every_owned_state = {
				limit = {
					is_core_of = LBA
				}
				LBA = {
					transfer_state = PREV
				}
			}
			every_owned_state = {
				limit = {
					is_core_of = SOM
				}
				SOM = {
					transfer_state = PREV
				}
			}
			if = {
				limit = {
					owns_state = 164
				}
				TUR = {
					if = {
						limit = {
							NOT = {
								has_country_flag = great_war_loser
							}
						}
						transfer_state = 164
					}
					else = {
						GRE = {
							transfer_state = 164
						}
					}
				}
			}
			if = {
				limit = {
					547 = {
						is_owned_by = ENG
					}
					792 = {
						is_owned_by = ITA
					}
				}
				ENG = {
					transfer_state = 792
				}
			}
			if = {
				limit = {
					547 = {
						is_owned_by = KEN
					}
					792 = {
						is_owned_by = ITA
					}
				}
				KEN = {
					transfer_state = 792
				}
			}
			if = {
				limit = {
					ETH = {
						exists = yes
						has_war = no
						NOT = {
							has_country_flag = great_war_loser
						}
					}
				}
				every_owned_state = {
					limit = {
						is_core_of = ERI
					}
					ETH = {
						transfer_state = PREV
					}
				}
				else = {
					every_owned_state = {
						limit = {
							is_core_of = ERI
						}
						ERI = {
							transfer_state = PREV
						}
					}
				}
			}
			ROI = {
				every_owned_state = {
					teleport_armies = {
						to_state_array = owned_controlled_states
					}
				}
			}
			ITS = {
				every_owned_state = {
					teleport_armies = {
						to_state_array = owned_controlled_states
					}
				}
			}
			if = {
				limit = {
					ITA = {
						owns_state = 114
					}
				}
				114 = {
					create_unit = {
						division = "name = \"Avanguardie Repubblicane\" division_template = \"Avanguardie Repubblicane\" start_experience_factor = 0.3"
						owner = ITA
						prioritize_location = 11874
					}
					create_unit = {
						division = "name = \"Avanguardie Repubblicane\" division_template = \"Avanguardie Repubblicane\" start_experience_factor = 0.3"
						owner = ITA
						prioritize_location = 902
					}
				}
			}
			if = {
				limit = {
					ITS = {
						owns_state = 156
					}
				}
				156 = {
					create_unit = {
						division = "name = \"Avanguardie Repubblicane\" division_template = \"Avanguardie Repubblicane\" start_experience_factor = 0.3"
						owner = ITA
						prioritize_location = 10027
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
			if = {
				limit = {
					ITS = {
						owns_state = 117
					}
				}
				117 = {
					create_unit = {
						division = "name = \"Avanguardie Repubblicane\" division_template = \"Avanguardie Repubblicane\" start_experience_factor = 0.3"
						owner = ITA
						prioritize_location = 6939
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "name = \"Avanguardie Repubblicane\" division_template = \"Avanguardie Repubblicane\" start_experience_factor = 0.3"
						owner = ITA
						prioritize_location = 883
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
			if = {
				limit = {
					ITS = {
						owns_state = 115
					}
				}
				115 = {
					create_unit = {
						division = "name = \"Avanguardie Repubblicane\" division_template = \"Avanguardie Repubblicane\" start_experience_factor = 0.3"
						owner = ITA
						prioritize_location = 4014
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
			set_global_flag = italian_civil_war
		}
	}
	#stay as republic
	option = {
		name = garibaldi.6.a
		ai_chance = {
			factor = 100
		}
	}
	#For King and Stuff
	option = {
		name = garibaldi.6.b
		ai_chance = {
			factor = 0
		}
		ITS = {
			change_tag_from = ROOT
		}
	}
}

#Italy fragmentation news event
news_event = {
	id = garibaldi.7
	title = garibaldi.7.t
	desc = garibaldi.7.d
	is_triggered_only = yes
	picture = GFX_news_event_fascist_militia
	major = yes
	option = {
		name = garibaldi.7.a
	}
}

# The coronation of the Kingdom of Italy
country_event = {
	id = garibaldi.8
	title = garibaldi.8.t
	desc = garibaldi.8.d
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			drop_cosmetic_tag = yes
			set_cosmetic_tag = ITS_bourbon
		}
	}
	option = {
		name = garibaldi.8.a
		add_stability = 0.1
		# Ferdinant III of Bourbon-Two Sicilies
		add_country_leader_role = {
			character = ITA_ferdinando_iii
			promote_leader = yes
			country_leader = {
				ideology = autocracy
			}		
		}
		set_party_name = {
			ideology = neutrality
			long_name = ITS_neutrality_party_long
			name = ITS_neutrality_party
		}
	}
}

# Italian Republic choose their government after losing their mainland.
country_event = {
	id = garibaldi.9
	title = garibaldi.9.t
	desc = garibaldi.9.desc
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			set_capital = { state = 114 }
			set_country_flag = ROI_exiled_to_sardinia
		}
	}
	option = {
		name = garibaldi.9.a
		ai_chance = {
			factor = 10
		}
		ROI = {
			set_politics = {
				ruling_party = fascism
			}
			add_popularity = {
				ideology = democratic
				popularity = -0.3
			}
			hidden_effect = {
				unlock_national_focus = ITA_vittoria_mutilata
				unlock_national_focus = ITA_fascismo_movimento
				unlock_national_focus = ITA_mussolini_cult
				unlock_national_focus = ITA_blackshirt_veterans
				unlock_national_focus = ITA_march_on_rome
				unlock_national_focus = ITA_absorb_the_ani
			}
		}
	}
	option = {
		name = garibaldi.9.b
		ai_chance = {
			factor = 15
		}
		ROI = {
			add_war_support = 0.03
			add_stability = -0.07
		}
	}
	option = {
		ai_chance = {
			factor = 30
		}
		name = garibaldi.9.c
		every_owned_state = {
			limit = {
				is_owned_by = ROI
				is_fully_controlled_by = SRI
			}
			SRI = {
				transfer_state = PREV
			}
		}
		every_state = {
			limit = {
				is_owned_by = ROI
				is_fully_controlled_by = ITS
			}
			ITS = {
				transfer_state = PREV
			}
		}
		every_state = {
			limit = {
				is_owned_by = ROI
				is_controlled_by = SRI
			}
			SRI = {
				transfer_state = PREV
			}
		}
		every_state = {
			limit = {
				is_owned_by = ROI
				is_controlled_by = ITS
			}
			ITS = {
				transfer_state = PREV
			}
		}
		every_state = {
			limit = {
				is_owned_by = ROI
				is_core_of = ROI
				NOT = {
					state = 114
				}
			}
			ITS = {
				transfer_state = PREV
			}
		}
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						is_core_of = ROI
						is_claimed_by = ROI
					}
				}
				remove_core_of = ROI
				remove_claim_by = ROI
			}
			SRD = {
				transfer_state = 114
				add_state_core = 114
				inherit_technology = ROI
				ROI = {
					every_unit_leader = {
						set_nationality = SRD
					}
				}
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				} 
				annex_country = {
					target = ROI
					transfer_troops = yes
				}
				delete_unit_template_and_units = {
					division_template = "Avanguardie Repubblicane"
					disband = yes
				}
				change_tag_from = ROOT
				every_state = {
					teleport_armies = {
						to_state_array = owned_controlled_states
					}
				}
			}
		}
	}
	option = {
		ai_chance = {
			factor = 30
		}
		name = garibaldi.9.d
		ITS = {
			country_event = {
				id = garibaldi.21
				days = 1
			}
		}
	}
}

# French Commune supports Italian Socialist Republic
#country_event = {
#	id = garibaldi.10
#	title = garibaldi.10.t
#	desc = garibaldi.10.d
#	fire_only_once = yes
#	trigger = {
#		tag = FRA
#		FRA = {
#			has_government = communism
#			has_war = no
#		}
#		any_country = {
#			original_tag = ITA
#			has_country_flag = ITA_socialist_italy_flag
#			has_government = communism
#			exists = yes
#			has_war_with = ITS
#			surrender_progress > 0.5
#		}
#	}
#	option = {
#		name = garibaldi.10.a
#		ai_chance = { factor = 100 }
#		FRA = {
#			give_guarantee = ITS
#			add_to_war = {
#				targeted_alliance = SRI
#				enemy = ITS 
#			}
#		}
#
#		hidden_effect = {
#			FRA = {
#				if = {
#					limit = {
#						is_faction_leader = yes
#					}
#					set_country_flag = internationale_is_already_formed
#					add_to_faction = SRI
#				}
#				if = {
#					limit = {
#						is_faction_leader = no
#					}
#					create_faction = internationale
#					add_to_faction = SRI
#				}
#			}
#
#			if = {
#				limit = {
#					AUH = {
#						exists = yes
#						NOT = { has_war_with = SRI }
#					}
#				}
#
#				AUH = {
#					country_event = { id = garibaldi.11 days = 3 }
#				}
#			}
#		}
#	}
#	option = {
#		name = garibaldi.10.b
#		ai_chance = { factor = 0 }
#		FRA = {
#			add_war_support = -0.1
#			add_stability = -0.05
#		}
#	}
#}
# The response of National France and Austria when French Commune intervenes Italian civil war
#country_event = {
#	id = garibaldi.11
#	title = garibaldi.11.t
#	desc = garibaldi.11.d
#	fire_only_once = yes
#	is_triggered_only = yes
#	option = {
#		name = garibaldi.11.a
#		ai_chance = { factor = 100 }
#		ROOT = {
#			declare_war_on = {
#				target = FRA
#				type = topple_government
#			}
#			add_war_support = 0.1
#			add_stability = -0.02
#		}
#	}
#	option = {
#		name = garibaldi.11.b
#		ai_chance = { factor = 0 }
#		ROOT = {
#			add_war_support = -0.1
#			add_stability = -0.01
#		}
#	}
#}
# Socialists control the Rome
country_event = {
	id = garibaldi.12
	title = garibaldi.12.t
	desc = garibaldi.12.d
	fire_only_once = yes
	mean_time_to_happen = {
		days = 1
	}
	trigger = {
		original_tag = ITA
		has_country_flag = ITA_socialist_italy_flag
		has_idea = ITA_roman_question
		controls_state = 2
		OR = {
			has_war_with = ITS
			has_war_with = ROI
		}
	}
	option = {
		name = garibaldi.12.a
		ai_chance = {
			factor = 30
		}
		news_event = {
			id = garibaldi.13
			days = 1
		}
		add_stability = -0.1
		remove_ideas = ITA_roman_question
		set_country_flag = pope_killed
		hidden_effect = {
			SRI = {
				add_named_threat = {
					threat = 5
					name = garibaldi.13.t
				}
			}
			every_country = {
				limit = {
					OR = {
						tag = AUH
						tag = AUS
						#tag = FRA
						#tag = HUN
						tag = SPR
						tag = POR
						#tag = CRO
						#tag = SLO
						tag = POL
						#tag = GAL
						#tag = CZE
						#tag = LIT
						tag = BRA
						tag = MEX
					}
					NOT = {
						has_government = communism
					}
					exists = yes
					is_subject = no
				}
				country_event = {
					id = garibaldi.14
					days = 4
				}
			}
		}
	}
	option = {
		name = garibaldi.12.b
		ai_chance = {
			factor = 60
		}
	}
}

# POPE IS KILLED
###################
news_event = {
	id = garibaldi.13
	title = garibaldi.13.t
	desc = garibaldi.13.d
	picture = GFX_news_event_vatican_on_fire
	major = yes
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			set_global_flag = pope_killed
			news_event = {
				id = garibaldi.31
				days = 30
			}
			PAP = {
				if = {
					limit = {
						NOT = {
							has_global_flag = pope_death_pius_x
							has_global_flag = pope_death_benedict_xv
							has_global_flag = pope_death_pius_xi
							has_global_flag = pope_death_pius_xii
						}
					}
					retire_character = PAP_pius_x
					promote_character = PAP_college_of_cardinals
					set_global_flag = pope_death_pius_x
				}
				else_if = {
					limit = {
						has_global_flag = pope_death_pius_x
						NOT = {
							has_global_flag = pope_death_benedict_xv
							has_global_flag = pope_death_pius_xi
							has_global_flag = pope_death_pius_xii
						}
					}
					retire_character = PAP_benedict_xv
					promote_character = PAP_college_of_cardinals
					set_global_flag = pope_death_benedict_xv
				}
				else_if = {
					limit = {
						has_global_flag = pope_death_pius_x
						has_global_flag = pope_death_benedict_xv
						NOT = {
							has_global_flag = pope_death_pius_xi
							has_global_flag = pope_death_pius_xii
						}
					}
					retire_character = PAP_pius_xi
					promote_character = PAP_college_of_cardinals
					set_global_flag = pope_death_pius_xi
				}
				else_if = {
					limit = {
						has_global_flag = pope_death_pius_x
						has_global_flag = pope_death_benedict_xv
						has_global_flag = pope_death_pius_xi
						NOT = {
							has_global_flag = pope_death_pius_xii
						}
					}
					retire_character = PAP_pius_xii
					promote_character = PAP_college_of_cardinals
					set_global_flag = pope_death_pius_xii
				}
				else = {
					promote_character = PAP_college_of_cardinals
				}
			}
		}
	}
	option = {
		trigger = {
			tag = SRI
		}
		name = garibaldi.13.a
	}
	option = {
		trigger = {
			NOT = {
				tag = SRI
			}
		}
		name = garibaldi.13.b
	}
}

#Catholic countries issue ultimatum
country_event = {
	id = garibaldi.14
	title = garibaldi.14.t
	desc = garibaldi.14.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.14.a
		ai_chance = {
			base = 70
			modifier = {
				has_war = yes
				factor = 0
			}
		}
		hidden_effect = {
			set_country_flag = catholic_crusader
			set_global_flag = catholic_crusader_is_here
		}
	}
	option = {
		name = garibaldi.14.b
		ai_chance = {
			base = 50
			modifier = {
				is_major = yes
				factor = 0
			}
		}
		add_war_support = -0.1
		add_stability = -0.1
	}
}

#Ultimatum
country_event = {
	id = garibaldi.15
	title = garibaldi.15.t
	desc = garibaldi.15.d
	fire_only_once = yes
	trigger = {
		original_tag = ITA
		has_country_flag = ITA_socialist_italy_flag
		has_global_flag = catholic_crusader_is_here
	}
	mean_time_to_happen = {
		days = 5
	}
	option = {
		name = garibaldi.15.a
		ai_chance = {
			factor = 100
		}
		SRI = {
			country_event = {
				id = garibaldi.16
			}
		}
	}
	option = {
		name = garibaldi.15.b
		ai_chance = {
			factor = 1
		}
		every_country = {
			limit = {
				has_country_flag = catholic_crusader
			}
			declare_war_on = {
				target = SRI
				type = topple_government
			}
		}
	}
}

# Proposal of Peace Conference
country_event = {
	id = garibaldi.16
	title = garibaldi.16.t
	desc = garibaldi.16.d
	is_triggered_only = yes
	option = {
		name = garibaldi.16.a
		ai_chance = {
			factor = 100
		}
		every_other_country = {
			limit = {
				OR = {
					has_country_flag = ITA_republican_italy_flag
					has_country_flag = ITA_monarchist_italy_flag
					has_country_flag = ITA_socialist_italy_flag
				}
				has_war_with = ROOT
				if = {
					limit = {
						has_country_flag = ROI_exiled_to_sardinia
					}
					is_in_faction_with = ITS
				}
			}
			country_event = {
				id = garibaldi.17
				days = 7
			}
		}
	}
	option = {
		name = garibaldi.16.b
		ai_chance = {
			factor = 0
		}
		trigger = {
			NOT = {
				has_global_flag = catholic_crusader_is_here
			}
		}
		add_stability = -0.3
		add_war_support = -0.3
	}
}

# Response on Peace Conference
country_event = {
	id = garibaldi.17
	title = garibaldi.17.t
	desc = garibaldi.17.d
	is_triggered_only = yes
	option = {
		name = garibaldi.17.a
		ai_chance = {
			base = 100 
			modifier = {
				factor = 0
				NOT = {
					has_global_flag = catholic_crusader_is_here
				}
				FROM = {
					has_country_flag = ITA_monarchist_italy_flag
					owns_state = 117
					owns_state = 156
				}
				ROOT = {
					has_full_control_of_state = 117
					controls_state = 156
				}
			}
			modifier = {
				factor = 100
				ROOT = {
					OR = {					
					    has_country_flag = ITA_monarchist_italy_flag
						has_country_flag = ITA_republican_italy_flag
					}
					OR = {					
					    is_in_faction_with = ROI
						is_in_faction_with = ITS
					}
				}	
			}
		}
		every_state = {
			limit = {
				is_owned_by = ROOT
				is_controlled_by = FROM
				NOT = {
					is_controlled_by = ROOT
				}	
			}
			FROM = {
				transfer_state = PREV
			}
		}
		every_state = {
			limit = {
				is_owned_by = FROM
				is_controlled_by = ROOT
				NOT = {
					is_controlled_by = FROM
				}	
			}
			ROOT = {
				transfer_state = PREV
			}
		}
		every_country = {
			limit = {
				has_war_with = FROM
				OR = {
					has_country_flag = intervened_in_italian_civil_war
					has_country_flag = catholic_crusader
					tag = ROOT
					is_in_faction_with = ROOT
					is_subject_of = ROOT
				}
			}
			every_country = {
				limit = {
					OR = {
						has_country_flag = intervened_in_italian_civil_war
						has_country_flag = catholic_crusader
						tag = FROM
						is_in_faction_with = FROM
						is_subject_of = FROM
					}
				}
				white_peace = PREV
			}
		}
		white_peace = FROM
	}
	option = {
		name = garibaldi.17.b
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				NOT = {
					has_global_flag = catholic_crusader_is_here
				}
				FROM = {
					has_country_flag = ITA_monarchist_italy_flag
					owns_state = 117
					owns_state = 156
				}
				ROOT = {
					has_full_control_of_state = 117
					controls_state = 156
				}
			}
			modifier = {
				add = 100
				ROOT = {
					OR = {					
					    has_country_flag = ITA_monarchist_italy_flag
						has_country_flag = ITA_republican_italy_flag
					}
					OR = {					
					    is_in_faction_with = ROI
						is_in_faction_with = ITS
					}
				}	
			}
		}
		add_stability = -0.05
		add_war_support = -0.05
	}
}

# Italian Federation
news_event = {
	id = garibaldi.18
	title = garibaldi.18.t
	desc = garibaldi.18.d
	picture = GFX_news_event_italian_republic
	fire_only_once = yes
	trigger = {
		has_global_flag = italian_civil_war
		all_country = {
			OR = {
				has_country_flag = ITA_republican_italy_flag
				has_country_flag = ITA_monarchist_italy_flag
				has_country_flag = ITA_socialist_italy_flag
			}
			has_war = no
		}
	}
	mean_time_to_happen = {
		days = 10
	}
	major = yes
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = catholic_crusader_is_here
				}
				every_country = {
					limit = {
						has_country_flag = catholic_crusader
						is_faction_leader = no
						is_in_faction_with = ITS
						NOT = {
							tag = ROI
							tag = ITS
						}
					}
					leave_faction = yes
				}
			}
			if = {
				limit = {
					ITS = {
						is_in_faction = no
					}
				}
				ITS = {
					create_faction = italian_federation
				}
			}
			if = {
				limit = {
					ROI = {
						exists = yes
						is_in_faction = no
						is_subject = no
					}
				}
				ITS = {
					add_to_faction = ROI
				}
			}
			if = {
				limit = {
					SRD = {
						exists = yes
						is_in_faction = no
						is_subject = no
					}
				}
				ITS = {
					add_to_faction = SRD
				}
			}
			if = {
				limit = {
					has_global_flag = catholic_crusader_is_here
					any_country = {
						has_country_flag = catholic_crusader
					}
					SRI = {
						NOT = {
							owns_state = 157
							owns_state = 117
						}
					}
				}
				every_state = {
					limit = {
						OR = {
							is_owned_by = SRI
							is_owned_by = ROI
							is_owned_by = ITS
							is_owned_by = ITA
						}
						state = 2			
					}
					PAP = {
						transfer_state = PREV
						add_state_core = PREV
					}
				}
			}
			if = {
				limit = {
					PAP = {
						exists = yes
					}
				}
				inherit_technology = ITS
				ITS = {
					add_to_faction = PAP
				}
			}
			every_state = {
				limit = {
					is_owned_by = PAP
				}
				set_demilitarized_zone = yes
			}
		}
	}
	option = {
		name = garibaldi.18.a
		ai_chance = {
			factor = 100
		}
	}
}

# Two Sicilies or not
country_event = {
	id = garibaldi.19
	title = garibaldi.19.t
	desc = garibaldi.19.d
	fire_only_once = yes
	trigger = {
		original_tag = ITA
		has_global_flag = italian_civil_war
		has_country_flag = ITA_monarchist_italy_flag
		has_war = no
		has_country_leader = {
			character = ITA_ferdinando_iii
		}	
		OR = {
			owns_state = 117
			owns_state = 115
		}	
	}
	mean_time_to_happen = {
		days = 33
	}
	option = {
		name = garibaldi.19.a
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0
				OR = {
					owns_state = 159
					owns_state = 158
					owns_state = 114
				}
			}
		}
		hidden_effect = {
			if = {
				limit = {
					is_faction_leader = yes
				}
				set_faction_name = italian_federation
			}			
			every_unit_leader = {
				set_nationality = SIC
			}
			every_state = {
				remove_core_of = ITS
				remove_claim_by = ITS
			}
			SIC = {
				inherit_technology = ITS
				annex_country = {
					target = ITS
					transfer_troops = yes
				}
				change_tag_from = ITS
			}
			if = {
				limit = {
					SIC = {
						owns_state = 2
					}
				}
				PAP = {
					add_state_core = 2
					transfer_state = 2
				}
			}
			if = {
				limit = {
					SIC = {
						owns_state = 835
					}
				}
				PAP = {
					add_state_core = 835
					transfer_state = 835
				}
			}
			if = {
				limit = {
					SIC = {
						owns_state = 161
					}
				}
				PAP = {
					add_state_core = 161
					transfer_state = 161
				}
			}
			if = {
				limit = {
					PAP = {
						exists = yes
					}
					NOT = {
						has_global_flag = catholic_crusader_is_here
					}
				}
				SIC = {
					puppet = PAP
				}
			}
			if = {
				limit = {
					SIC = {
						owns_state = 162
					}
				}
				TUS = {
					add_state_core = 162
					transfer_state = 162
				}
				SIC = {
					puppet = TUS
				}
			}
			if = {
				limit = {
					SIC = {
						owns_state = 833
					}
				}
				EMI = {
					add_state_core = 833
					transfer_state = 833
				}
				SIC = {
					puppet = EMI
				}
			}
			if = {
				limit = {
					SIC = {
						owns_state = 114
					}
				}
				SRD = {
					add_state_core = 114
					transfer_state = 114
					if = {
						limit = {
							SIC = {
								owns_state = 158
							}
						}
						add_state_core = 158
						transfer_state = 158
						set_cosmetic_tag = SRD_PIE
					}
				}
				SIC = {
					puppet = SRD
				}
			}
			if = {
				limit = {
					SIC = {
						owns_state = 160
					}
				}
				VNC = {
					add_state_core = 160
					transfer_state = 160
					if = {
						limit = {
							SIC = {
								owns_state = 159
							}
						}
						add_state_core = 159
						transfer_state = 159
						set_cosmetic_tag = VNC_AUH
					}
				}
				SIC = {
					puppet = VNC
				}
			}
			if = {
				limit = {
					SIC = {
						owns_state = 115
						NOT = {
							owns_state = 117
						}
					}
				}
				set_cosmetic_tag = SIC_ONLY
				set_capital = { state = 115 }
			}
			if = {
				limit = {
					SIC = {
						NOT = {
							owns_state = 115
						}
					}
				}
				set_cosmetic_tag = SIC_NAPLES
			}
			ITA_gabriele_d_annunzio = {
				set_nationality = SIC
			}
			ITA_antonio_salandra = {
				set_nationality = SIC
			}
			ITA_antonino_paterne_castello = {
				set_nationality = SIC
			}
			SIC = {
				ITA_vittorio_emanuele_orlando = {
					promote_character = yes
				}
				ITA_gabriele_d_annunzio = {
					promote_character = yes
				}
			}
		}
	}
	option = {
		name = garibaldi.19.b
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				all_owned_state = {
					is_core_of = SIC
				}
			}
		}
	}
}

# Sardinia or not
country_event = {
	id = garibaldi.20
	title = garibaldi.20.t
	desc = garibaldi.20.d
	fire_only_once = yes
	mean_time_to_happen = {
		days = 56
	}
	trigger = {
		original_tag = ITA
		has_global_flag = italian_civil_war
		has_country_flag = ITA_republican_italy_flag
		has_war = no
		owns_state = 114
		all_owned_state = {
			OR = {
				state = 114
				state = 158
				state = 834
				state = 735
			}
		}
		NOT = {
			has_government = fascism
		}
	}
	option = {
		name = garibaldi.20.a
		ai_chance = {
			factor = 70
		}
		set_cosmetic_tag = SRD
		add_stability = 0.2
		hidden_effect = {
			drop_cosmetic_tag = yes
			every_unit_leader = {
				set_nationality = SRD
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = ROI
						is_claimed_by = ROI
					}
				}
				remove_core_of = ROI
				remove_claim_by = ROI
			}
			SRD = {
				add_state_core = 114
				inherit_technology = ROI
				annex_country = {
					target = ROI
					transfer_troops = yes
				}
				add_stability = 0.2
				change_tag_from = ROOT
				if = {
					limit = {
						SRD = {
							owns_state = 158
						}
					}
					set_cosmetic_tag = SRD_PIE
					add_state_core = 158
					add_state_core = 834
					add_state_core = 735
				}
				if = {
					limit = {
						is_in_faction = no
						is_subject = no
					}
					if = {
						limit = {
							ITS = {
								is_faction_leader = yes
							}
						}
						ITS = {
							add_to_faction = SRD
						}
					}
					else_if = {
						limit = {
							SIC = {
								is_faction_leader = yes
							}
						}
						SIC = {
							add_to_faction = SRD
						}
					}
				}			
			}
		}
	}
	option = {
		name = garibaldi.20.b
		ai_chance = {
			factor = 0
		}
		add_stability = -0.1
	}
}

# Italian Federation
country_event = {
	id = garibaldi.21
	title = garibaldi.21.t
	desc = garibaldi.21.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.21.a
		ai_chance = {
			factor = 100
		}
		ROI = {
			white_peace = ITS
		}
		ITS = {
			leave_faction = yes
			create_faction = italian_federation
			add_to_faction = ROI
		}
	}
	option = {
		name = garibaldi.21.b
		ai_chance = {
			factor = 0
		}
		ROI = {
			country_event = {
				id = garibaldi.22
			}
		}
	}
}

# Italian Federation is denied
country_event = {
	id = garibaldi.22
	title = garibaldi.22.t
	desc = garibaldi.22.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.22.a
		ai_chance = {
			factor = 100
		}
		add_war_support = 0.01
		add_stability = -0.15
	}
}

# Socialists unify the Italy
news_event = {
	id = garibaldi.23
	title = garibaldi.23.t
	desc = garibaldi.23.d
	picture = GFX_news_event_italian_socialism
	fire_only_once = yes
	trigger = {
		original_tag = ITA
		any_country = {
			has_country_flag = ITA_socialist_italy_flag
			has_war = no
			owns_state = 115
			owns_state = 117
			owns_state = 2
		}
		NOT = {
			any_country = {
				has_country_flag = ITA_monarchist_italy_flag
				exists = yes
			}
		}
	}
	mean_time_to_happen = {
		days = 3
	}
	major = yes
	immediate = {
		hidden_effect = {
			SRI = {
				add_stability = 0.1
				set_cosmetic_tag = ITA_socialism
				set_capital = { state = 2 }
				set_rule = {
					can_join_factions = yes
				}
				#if = {
				#	limit = {
				#		is_in_faction_with = FRA
				#		FRA = { has_country_flag = internationale_is_already_formed }
				#	}
				#	leave_faction = yes
				#}
				#if = {
				#	limit = {
				#		is_in_faction_with = FRA
				#		FRA = { NOT = { has_country_flag = internationale_is_already_formed } }
				#	}
				#	FRA = { dismantle_faction = yes }
				#}
			}
		}
	}
	option = {
		name = garibaldi.23.a
		ai_chance = {
			factor = 100
		}
		trigger = {
			has_government = communism
		}
	}
	option = {
		name = garibaldi.23.b
		ai_chance = {
			factor = 100
		}
		trigger = {
			NOT = {
				has_government = communism
			}
		}
	}
}

# Monarchists unify the Italy
news_event = {
	id = garibaldi.24
	title = garibaldi.24.t
	desc = garibaldi.24.d
	picture = GFX_news_event_italian_kingdom
	fire_only_once = yes
	trigger = {
		original_tag = ITA
		has_global_flag = italian_civil_war
		NOT = {
			any_country = {
				has_country_flag = ITA_socialist_italy_flag
				exists = yes
			}
		}	
		any_country = {
			has_country_flag = ITA_monarchist_italy_flag
			exists = yes
			has_war = no
			owns_state = 161
			owns_state = 2
		}
	}
	mean_time_to_happen = {
		days = 3
	}
	major = yes
	immediate = {
		hidden_effect = {
			ITS = {
				add_stability = 0.1
				set_capital = { state = 2 }
				set_rule = {
					can_join_factions = yes
				}
				#if = {
				#	limit = {
				#		is_in_faction_with = NFA
				#		NFA = { has_country_flag = entente_is_already_formed_by_nfa }
				#	}
				#	leave_faction = yes
				#}
				#if = {
				#	limit = {
				#		is_in_faction_with = NFA
				#		NFA = {
				#			NOT = {
				#				has_country_flag = entente_is_already_formed_by_nfa
				#				has_country_flag = entente_is_already_formed_by_others
				#			}
				#		}
				#	}
				#	NFA = { dismantle_faction = yes }
				#}
				#if = {
				#	limit = {
				#		is_in_faction_with = NFA
				#		NFA = { has_country_flag = entente_is_already_formed_by_others }
				#	}
				#
				#	NFA = { dismantle_faction = yes }
				#
				#	every_other_country = {
				#		limit = {
				#			OR = {
				#				tag = CAN
				#				tag = AST
				#				tag = ENG #Imperial Entente
				#			}
				#			is_faction_leader = yes
				#		}
				#		add_to_faction = NFA
				#	}
				#}
			}
		}
	}
	option = {
		name = garibaldi.24.a
		ai_chance = {
			factor = 100
		}
		trigger = {
			has_government = neutrality
		}
	}
	option = {
		name = garibaldi.24.b
		ai_chance = {
			factor = 100
		}
		trigger = {
			has_government = communism
		}
	}
}

# Republicans unify the Italy
news_event = {
	id = garibaldi.25
	title = garibaldi.25.t
	desc = garibaldi.25.d
	picture = GFX_news_event_italian_republic
	fire_only_once = yes
	trigger = {
		original_tag = ITA
		has_global_flag = italian_civil_war
		any_country = {
			has_country_flag = ITA_republican_italy_flag
			owns_state = 115
			owns_state = 117
			owns_state = 161
			owns_state = 2
		}
		NOT = {
			any_country = {
				has_country_flag = ITA_monarchist_italy_flag
				exists = yes
			}
			any_country = {
				has_country_flag = ITA_socialist_italy_flag
				exists = yes
			}
		}		
	}
	mean_time_to_happen = {
		days = 3
	}
	major = yes
	immediate = {
		hidden_effect = {
			ROI = {
				add_stability = 10
				set_capital = { state = 2 }
				set_rule = {
					can_join_factions = yes
				}
			}
		}
	}
	option = {
		name = garibaldi.25.a
		ai_chance = {
			factor = 100
		}
		trigger = {
			has_government = democratic
		}
	}
	option = {
		name = garibaldi.25.b
		ai_chance = {
			factor = 100
		}
		trigger = {
			NOT = {
				has_government = democratic
			}
		}
	}
}

# Italy is devided by the Republicans and Monarchists
country_event = {
	id = garibaldi.26
	title = garibaldi.26.t
	desc = garibaldi.26.d
	fire_only_once = yes
	trigger = {
		has_global_flag = italian_civil_war
		has_country_flag = ITA_monarchist_italy_flag
		ROI = {
			has_war = no
			is_subject = no
			OR = {
				owns_state = 158
				owns_state = 161
			}
		}
		SRI = {
			exists = no
		}
		ITS = {
			has_war = no
			is_subject = no
			owns_state = 2
		}
	}
	mean_time_to_happen = {
		days = 3
	}
	immediate = {
		hidden_effect = {
			ITS = {
				#if = {
				#	limit = {
				#		is_in_faction_with = NFA
				#		NFA = { has_country_flag = entente_is_already_formed_by_nfa }
				#	}
				#	leave_faction = yes
				#	ROI = { leave_faction = yes }
				#}
				#if = {
				#	limit = {
				#		is_in_faction_with = NFA
				#		NFA = {
				#			NOT = {
				#				has_country_flag = entente_is_already_formed_by_nfa
				#				has_country_flag = entente_is_already_formed_by_others
				#			}
				#		}
				#	}
				#	NFA = { dismantle_faction = yes }
				#}
				#if = {
				#	limit = {
				#		is_in_faction_with = NFA
				#		NFA = { has_country_flag = entente_is_already_formed_by_others }
				#	}
				#
				#	NFA = { dismantle_faction = yes }
				#
				#	every_other_country = {
				#		limit = {
				#			OR = {
				#				tag = CAN
				#				tag = AST
				#				tag = ENG #Imperial Entente
				#			}
				#			is_faction_leader = yes
				#		}
				#		add_to_faction = NFA
				#	}
				#}
			}
		}
	}
	option = {
		name = garibaldi.26.a
		ai_chance = {
			base = 30
			modifier = {
				factor = 0
				OR = {
					has_stability < 0
					has_war_support < 0
					has_manpower < 0
				}
			}
		}
		set_rule = {
			can_join_factions = no
		}
		dismantle_faction = yes
		declare_war_on = {
			target = ROI
			type = civil_war
		}
		##add_civil_war_target = ROI
		ROI = {
			set_rule = {
				can_join_factions = no
			}
		}
	}
	option = {
		name = garibaldi.26.b
		ai_chance = {
			factor = 70
		}
		ROI = {
			country_event = {
				id = garibaldi.27
				days = 3
			}
		}
	}
}

# Italy is devided by the Republicans and Monarchists
country_event = {
	id = garibaldi.27
	title = garibaldi.27.t
	desc = garibaldi.27.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.27.a
		ai_chance = {
			base = 15
			modifier = {
				factor = 0
				OR = {
					has_stability < 0
					has_war_support < 0
					has_manpower < 0
				}
			}
		}
		leave_faction = yes
		set_rule = {
			can_join_factions = no
		}
		declare_war_on = {
			target = ITS
			type = civil_war
		}
		#add_civil_war_target = ITS
		ITS = {
			set_rule = {
				can_join_factions = no
			}
			dismantle_faction = yes
		}
	}
	option = {
		name = garibaldi.27.b
		ai_chance = {
			factor = 85
		}
		if = {
			limit = {
				ROI = {
					owns_state = 158
				}
			}
			set_capital = { state = 158 }
		}
	}
}

# Establish puppets on the North and Sardinia for the Kingdom of Two Sicilies 
news_event = {
	id = garibaldi.28
	title = garibaldi.28.t
	desc = garibaldi.28.d
	picture = GFX_news_event_italian_republic
	fire_only_once = yes
	trigger = {
		has_global_flag = italian_civil_war
		SIC = {
			exists = yes
			has_war = no
		}
		ITS = {
			exists = no
		}
		ROI = {
			OR = {
				exists = no
				is_subject_of = SIC
			}
		}
		SRI = {
			OR = {
				exists = no
				is_subject_of = SIC
			}
		}
	}
	major = yes
	mean_time_to_happen = {
		days = 3
	}
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					any_country = {
						has_country_flag = ITA_socialist_italy_flag
						is_subject_of = SIC
					}
				}
				SIC = {
					annex_country = {
						target = SRI
					}
				}
			}
			SIC = {
				set_rule = {
					can_join_factions = yes
				}
				create_faction = italian_federation
			}
			every_state = {
				limit = {
					is_owned_by = SIC
					OR = {
						state = 2
						state = 835
						state = 161
					}
				}
				PAP = {
					if = {
						limit = {
							exists = no
						}
						inherit_technology = SIC
					}
					transfer_state = PREV
					add_state_core = PREV
					add_to_faction = PAP
				}
			}
			every_state = {
				limit = {
					is_owned_by = SIC
					state = 833
				}
				EMI = {
					if = {
						limit = {
							exists = no
						}
						inherit_technology = SIC
						transfer_state = PREV
						add_state_core = PREV
						SIC = {
							puppet = EMI
						}
					}
					else = {
						transfer_state = PREV
						add_state_core = PREV
					}
				}
			}
			every_state = {
				limit = {
					is_owned_by = SIC
					OR = {
						state = 114
						state = 158
					}
				}
				SRD = {
					if = {
						limit = {
							exists = no
						}
						inherit_technology = SIC
						transfer_state = PREV
						add_state_core = PREV
						SIC = {
							puppet = SRD
						}
					}
					else = {
						transfer_state = PREV
						add_state_core = PREV
					}
				}
			}
			every_state = {
				limit = {
					is_owned_by = SIC
					state = 162
				}
				TUS = {
					if = {
						limit = {
							exists = no
						}
						inherit_technology = SIC
						transfer_state = PREV
						add_state_core = PREV
						SIC = {
							puppet = TUS
						}
					}
					else = {
						transfer_state = PREV
						add_state_core = PREV
					}
				}
			}
			if = {
				limit = {
					SRD = {
						owns_state = 158
					}
				}
				SRD = {
					set_capital = { state = 158 }
					set_cosmetic_tag = SRD_PIE
					add_state_core = 735
					add_state_core = 834
				}
			}
		}
	}
	option = {
		name = garibaldi.28.a
		ai_chance = {
			factor = 100
		}
		trigger = {
			OR = {
				original_tag = ITA
				original_tag = SIC
			}
		}
	}
	option = {
		name = garibaldi.28.b
		ai_chance = {
			factor = 100
		}
		trigger = {
			NOT = {
				original_tag = ITA
				original_tag = SIC
			}
		}
	}
}

# National France supports Italian Republic
country_event = {
	id = garibaldi.29
	title = garibaldi.29.t
	desc = garibaldi.29.d
	fire_only_once = yes
	is_triggered_only = yes
	#trigger = {
	#	tag = NFA
	#	NFA = {
	#		has_war = no
	#	}
	#	ITS = {
	#		exists = yes
	#		has_war_with = SRI
	#		surrender_progress > 0.5
	#	}
	#}
	option = {
		name = garibaldi.29.a
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				OR = {
					has_stability < 0.3
					has_war_support < 0.3
				}
			}
		}
		NFA = {
			give_guarantee = ITS
			every_country = {
				limit = {
					has_war_with = ITS
					NOT = {
						tag = ROI
					}
				}
				NFA = {
					declare_war_on = {
						target = PREV
						type = topple_government
					}
				}
			}
		}
		hidden_effect = {
			NFA = {
				if = {
					limit = {
						is_faction_leader = yes
					}
					every_country = {
						limit = {
							is_in_faction_with = ITS
						}
						NFA = {
							add_to_faction = PREV
						}
					}
					add_to_faction = ITS
					set_country_flag = entente_is_already_formed_by_nfa
				}
				if = {
					limit = {
						is_faction_leader = no
						is_in_faction = no
					}
					set_rule = {
						can_join_factions = yes
					}
					create_faction = entente
					every_country = {
						limit = {
							is_in_faction_with = ITS
						}
						NFA = {
							add_to_faction = PREV
						}
					}
					add_to_faction = ITS
				}
				if = {
					limit = {
						is_faction_leader = no
						is_in_faction = yes
					}
					leave_faction = yes
					create_faction = entente
					every_country = {
						limit = {
							is_in_faction_with = ITS
						}
						NFA = {
							add_to_faction = PREV
						}
					}
					add_to_faction = ITS
					set_country_flag = entente_is_already_formed_by_others
				}
			}
			if = {
				limit = {
					FRA = {
						exists = yes
						NOT = {
							has_war_with = ITS
						}
					}
				}
				FRA = {
					country_event = {
						id = garibaldi.30
						days = 3
					}
				}
			}
		}
	}
	option = {
		name = garibaldi.29.b
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				OR = {
					has_stability < 0.3
					has_war_support < 0.3
				}
			}
		}
		NFA = {
			add_war_support = -0.1
			add_stability = -0.05
		}
	}
}

# Response of French Commune on National France supports Italian Republic
country_event = {
	id = garibaldi.30
	title = garibaldi.30.t
	desc = garibaldi.30.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.30.a
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				OR = {
					has_stability < 0.3
					has_war_support < 0.3
				}
			}
		}
		give_guarantee = SRI
		declare_war_on = {
			target = NFA
			type = annex_everything
		}
		hidden_effect = {
			if = {
				limit = {
					is_faction_leader = yes
				}
				add_to_faction = SRI
				set_country_flag = internationale_is_already_formed
			}
			if = {
				limit = {
					is_in_faction = no
				}
				set_rule = {
					can_join_factions = yes
				}
				create_faction = internationale
				add_to_faction = SRI
			}
		}
	}
	option = {
		name = garibaldi.30.b
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				OR = {
					has_stability < 0.3
					has_war_support < 0.3
				}
			}
		}
		add_war_support = -0.1
		add_stability = -0.05
	}
}

# NEW POPE AFTER THE INCIDENT
################################
news_event = {
	id = garibaldi.31
	title = garibaldi.31.t
	desc = garibaldi.31.d
	picture = GFX_news_event_vatican
	major = yes
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			PAP = {
				if = {
					limit = {
						has_country_flag = pope_death_pius_xi
					}
					promote_character = PAP_pius_xii
				}
				else_if = {
					limit = {
						has_country_flag = pope_death_benedict_xv
					}
					promote_character = PAP_piux_xi
				}
				else_if = {
					limit = {
						has_country_flag = pope_death_pius_x
					}
					promote_character = PAP_benedict_xv
				}
				else = {
					#it must be not triggered
					promote_character = PAP_college_of_cardinals
				}
			}
		}
	}
	option = {
		name = garibaldi.31.a
		ai_chance = {
			factor = 100
		}
		trigger = {
			NOT = {
				has_government = communism
			}
		}
	}
	option = {
		name = garibaldi.31.b
		ai_chance = {
			factor = 100
		}
		trigger = {
			has_government = communism
		}
	}
}

# Foreign support for Italian Civil War
country_event = {
	id = garibaldi.32
	title = garibaldi.32.t
	desc = garibaldi.32.d
	picture = GFX_report_event_soldiers_in_france
	is_triggered_only = yes
	option = {
		name = garibaldi.32.a
		effect_tooltip = {
			add_equipment_to_stockpile = {
				type = infantry_equipment_1
				amount = 2000
			}
		}
	}
}

# DEATH OF PIUS X
####################
news_event = {
	id = garibaldi.33
	title = garibaldi.33.t
	desc = garibaldi.33.d
	picture = GFX_news_event_vatican
	
	fire_only_once = yes
	trigger = {
		OR = {
			tag = PAP
			tag = ITA
		}
		date > 1914.8.1
		NOT = {
			has_global_flag = pope_death_pius_x
		}
	}
	immediate = {
		hidden_effect = {
			PAP = {
				retire_character = PAP_pius_x
				promote_character = PAP_college_of_cardinals
			}
			set_global_flag = pope_death_pius_x
			news_event = {
				id = garibaldi.34
				days = 15
			}
		}
	}
	mean_time_to_happen = { days = 20 }
	option = {
		name = garibaldi.33.a
		trigger = {
			NOT = { has_government = communism } 
		}
	}
	option = {
		name = garibaldi.33.b
		trigger = {
			has_government = communism
		}
	}
}

# POPE BENEDICT XV
#####################
news_event = {
	id = garibaldi.34
	title = garibaldi.34.t
	desc = garibaldi.34.d
	picture = GFX_news_event_vatican

	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			PAP = {
				promote_character = PAP_benedict_xv
			}
		}
	}
	option = {
		name = garibaldi.34.a
		trigger = {
			NOT = { has_government = communism } 
		}
	}
	option = {
		name = garibaldi.34.b
		trigger = {
			has_government = communism
		}
	}
}

# DEATH OF BENEDICT XV
####################
news_event = {
	id = garibaldi.35
	title = garibaldi.35.t
	desc = garibaldi.35.d
	picture = GFX_news_event_vatican

	fire_only_once = yes
	trigger = {
		OR = {
			tag = PAP
			tag = ITA
		}
		date > 1922.1.1
		has_global_flag = pope_death_pius_x
		NOT = {
			has_global_flag = pope_death_benedict_xv
		}
	}
	immediate = {
		hidden_effect = {
			PAP = {
				retire_character = PAP_benedict_xv
				promote_character = PAP_college_of_cardinals
			}
			set_global_flag = pope_death_benedict_xv
			news_event = {
				id = garibaldi.36
				days = 15
			}
		}
	}
	mean_time_to_happen = { days = 20 }
	option = {
		name = garibaldi.35.a
		trigger = {
			NOT = { has_government = communism } 
		}
	}
	option = {
		name = garibaldi.35.b
		trigger = {
			has_government = communism
		}
	}
}

# POPE PIUS XI
#####################
news_event = {
	id = garibaldi.36
	title = garibaldi.36.t
	desc = garibaldi.36.d
	picture = GFX_news_event_vatican

	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			PAP = {
				promote_character = PAP_pius_xi
			}
		}
	}
	option = {
		name = garibaldi.36.a
		trigger = {
			NOT = { has_government = communism } 
		}
	}
	option = {
		name = garibaldi.36.b
		trigger = {
			has_government = communism
		}
	}
}
